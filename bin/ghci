#!/usr/bin/env sh
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"

CABAL_ARGS=$(cd $DIR; cabal-cargs)
OUT_ARGS="-outputdir=$DIR/../out"
FORWARD_ARGS=$@

cached-nix-shell $DIR/../default.nix -A shells.ghc --run "ghc $CABAL_ARGS $OUT_ARGS -O0 --interactive $FORWARD_ARGS"
